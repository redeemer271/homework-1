# Домашнее задание к занятию «Репликация и масштабирование. Часть 2» Скобкарев А.В.

---

### Задание 1

Опишите основные преимущества использования масштабирования методами:

- активный master-сервер и пассивный репликационный slave-сервер;  
Самый простой тип репликации, если съедет мастер, то можно быстро назначить слейв мастером и затем восстанавливать сломанный. Слейв может отвечать на запросы, что несколько разгружает мастер.  
- master-сервер и несколько slave-серверов;  
Увеличенная скорость доступа кратно количеству слейвов, бОльшая защищенность инфраструктуры от отказа.
- активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);  
DRBD по своей сути является сетевым распределенным рейд1.
- SAN-кластер.  
Все серваки имеют доступ к высокоскоростному пулу накопителей, всё очень быстро и круто, но дорого.  

Любое горизонтальное масштабирование эффективно настолько, насколько много мы подключаем серверов, перечисленные технологии это варианты реализации одной схемы масштабирования.

---

### Задание 2


Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц: 

- пользователи, 
- книги, 
- магазины (столбцы произвольно). 

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.* 

Вертикальное шардирование: имеет смысл, в зависимости от объема информации, шардировать таблицы "пользователи" и "книги", разместив их на других серверах, таким образом может быть достигнута большая скорость доступа к далёким (по номеру) позициям.  
  
Что касается горизонтального шардирования, его не всегда есть смысл делать, т.к. могут возникнуть большие проблемы с восстановлением бекапа. Невозможно добиться синхронного бекапа кластеров, за время лага данные могут измениться и при наличии зависимости данных между таблицами разных шардов, получим несоответствия. Но если таблицы шарда 1 не имеют зависимостей от таблиц шарда 2, то схему можно применить. Если перенести это на кейс из задания, то можно горизонтально шардировать данные, которые никогда не будут смешиваться, например географически разделённые магазины, т.е. например находящиеся в разных областях. В этом случае каждый магазин будет иметь свои склады, пользователей, данные будут видны для просмотра, скажем, директору, но проблемы на шарде одного филиала не вызовут проблем на других шардах.  
![1](https://github.com/redeemer271/homework-1/blob/main/sharding.png)

## Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

---
### Задание 3*

Выполните настройку выбранных методов шардинга из задания 2.

*Пришлите конфиг Docker и SQL скрипт с командами для базы данных*.
